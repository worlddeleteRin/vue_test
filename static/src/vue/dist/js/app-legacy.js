(function(){"use strict";var t={3133:function(t,e,r){r(6992),r(8674),r(9601),r(7727),r(4747),r(1539),r(9714),r(9826),r(7941),r(6699),r(2023);var n=r(5166),a=r(2119);function i(t,e,r,a,i,c){var o=(0,n.up)("MainHeader"),s=(0,n.up)("PopupMessage"),u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)("div",null,[(0,n.Wm)(o),(0,n.Wm)(s),(0,n.Wm)(u)])}var c=r(7171),o=(r(5666),{class:"main__header__block"}),s={class:"main__header__second"},u=(0,n.Wm)("a",{class:"header__second__logo logo__big"},[(0,n.Wm)("img",{class:"logoimg",src:"http://127.0.0.1:8000/static/images/main_logo2.jpg",alt:""})],-1),_={class:"header__second__catalog"},d={class:"header__second__catalog__items"},l=(0,n.Uk)(" Главная "),p=(0,n.uE)('<div class="header__second__catalog__items"><a href="{% url &#39;products:stock&#39; %}"> Акции </a></div><div class="header__second__catalog__items"><a href="{% url &#39;products:index&#39; %}#delivery_info_main"> Доставка и оплата </a></div><div class="header__second__catalog__items"><a href="{% url &#39;products:index&#39; %}#contact_info_main"> Контакты </a></div>',3),m=(0,n.uE)('<div class="main__header__phone"><div class="main__header__phone__main"><i class="fa fa-phone-alt"></i><div class="main__header__phone__main__text"><a href="tel:+79781161415"> +7 (978) 116-14-15 </a></div></div><div class="main__header__phone__callme"><span class="main__header__phone__callme"> Заказать звонок </span></div></div><div class="header__second__catalog__mobile"><div class="header__second__catalog__mobile__items"><i class="gg-menu-left-alt"></i><span> Меню </span></div></div><div class="main__header__phone__mobile"><div class="main__header__phone__main"><i class="fa fa-phone-alt"></i><div class="main__header__phone__main__text"><a href="tel:+79781161415"> +7 (978) 116-14-15 </a></div></div><div class="main__header__phone__callme"><span class="main__header__phone__callme"> Заказать звонок </span></div></div>',3),v={class:"header__second__icons"},h={class:"noselect nolink"},f=(0,n.Uk)(" Корзина "),g=(0,n.Wm)("a",{class:"header__second__icons__item nolink",href:"{% url 'users:index' %}"},[(0,n.Wm)("i",{class:"fa fa-user"})],-1),w=(0,n.uE)('<div class="header__popup__mobile"><div class="header__popup__mobile__menu"><a href="{% url &#39;products:index&#39; %}" class="mobile__nav"> Главная </a><a href="{% url &#39;products:index&#39; %}#delivery__menu__title" class="main__anchor__header\n                mobile__nav"> Меню доставки </a><a href="{% url &#39;products:stock&#39; %}" class="mobile__nav"> Акции </a><a href="{% url &#39;products:index&#39; %}#delivery_info_main" class="mobile__nav"> Доставка и оплата </a><a href="{% url &#39;products:index&#39; %}#contact_info_main" class="mobile__nav"> Контакты </a></div></div><div class="header__popub__mobile__close"><i class="fa fa-close"></i></div><div class="header__popup__mobile__wrapper"></div>',3);function y(t,e,r,a,i,c){var y=this,k=(0,n.up)("router-link");return(0,n.wg)(),(0,n.j4)("div",o,[(0,n.Wm)("div",s,[(0,n.Wm)(k,{to:"/"},{default:(0,n.w5)((function(){return[u]})),_:1}),(0,n.Wm)("div",_,[(0,n.Wm)("div",d,[(0,n.Wm)(k,{to:"/",class:"main__anchor__header"},{default:(0,n.w5)((function(){return[l]})),_:1})]),p]),m,(0,n.Wm)("div",v,[(0,n.Wm)(k,{class:"header__second__icons__item\n            header__cart nolink",to:"/cart"},{default:(0,n.w5)((function(){return[(0,n.Wm)("span",h,[f,(0,n.Wm)("span",null," | "+(0,n.zw)(y.cart_quantity),1)])]})),_:1}),g])]),w])}var k={name:"MainHeader",computed:{cart_amount:function(){return this.$store.state.cart_amount},cart_quantity:function(){return Object.keys(this.$store.state.products_in_cart).length}}};k.render=y;var b=k,W={id:"popup_info_dialog"};function P(t,e,r,a,i,c){return(0,n.wy)(((0,n.wg)(),(0,n.j4)("div",W,[(0,n.Wm)("div",null,(0,n.zw)(this.title),1)],512)),[[n.F8,this.show]])}var C={name:"PopupMessage",mounted:function(){console.log("mount popup message",this.show)},computed:{title:function(){return this.$store.state.popup_message_title},show:function(){return this.$store.state.popup_message_show}}};C.render=P;var j=C,x=r(9669),$=r.n(x);function S(){return A.apply(this,arguments)}function A(){return A=(0,c.Z)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$().get("/get_categories_api").then((function(t){var r=t.data.categories;e.$store.commit("setCategories",r)}));case 2:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function R(){return I.apply(this,arguments)}function I(){return I=(0,c.Z)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$().get("/get_api").then((function(t){var r=t.data.products;e.$store.commit("setProducts",r)}));case 2:case"end":return t.stop()}}),t)}))),I.apply(this,arguments)}function O(t){return T.apply(this,arguments)}function T(){return T=(0,c.Z)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$().get("/get_product_by_id_api",{params:{product_id:e}});case 2:return r=t.sent,n=r.data.product,console.log("response product is",n),this.$store.commit("setProduct",n),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),T.apply(this,arguments)}function z(){var t=this;$().get("/cart/get_products_in_cart_api").then((function(e){var r=e.data["products_in_cart"];t.$store.commit("setProductsInCart",r)}))}function M(){var t=this;$().get("/cart/get_cart_amount_api").then((function(e){var r=e.data["cart_amount"];t.$store.commit("setCartAmount",r)}))}function Z(t){return L.apply(this,arguments)}function L(){return L=(0,c.Z)(regeneratorRuntime.mark((function t(e){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$().get("/cart/add_item_ajax",{params:{product_id:e}}).then((function(){console.log("get response from server"),r.$store.commit("addProductToCart",e)}));case 2:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function Q(t){return U.apply(this,arguments)}function U(){return U=(0,c.Z)(regeneratorRuntime.mark((function t(e){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$().get("/cart/add_item_quantity_ajax",{params:{product_id:e}}).then((function(){r.$store.commit("addProductQuantity",e)}));case 2:case"end":return t.stop()}}),t)}))),U.apply(this,arguments)}function E(t){return D.apply(this,arguments)}function D(){return D=(0,c.Z)(regeneratorRuntime.mark((function t(e){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$().get("/cart/delete_item_quantity_ajax",{params:{product_id:e}}).then((function(t){var n=t.data.removed;n?r.$store.commit("deleteProductFromCart",e):r.$store.commit("deleteProductQuantity",e)}));case 2:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function F(t){return H.apply(this,arguments)}function H(){return H=(0,c.Z)(regeneratorRuntime.mark((function t(e){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$().get("/cart/delete_from_cart_ajax",{params:{product_id:e}}).then((function(){r.$store.commit("deleteProductFromCart",e)}));case 2:case"end":return t.stop()}}),t)}))),H.apply(this,arguments)}var q={name:"App",components:{MainHeader:b,PopupMessage:j},mounted:function(){var t=this;return(0,c.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getCategories(),t.getProducts(),t.getProductsInCart(),t.getCartAmount();case 4:case"end":return e.stop()}}),e)})))()},methods:{getCategories:S,getProducts:R,getProductsInCart:z,getCartAmount:M}};q.render=i;var B=q,N=r(894),Y=r(9888),K={INIT:0,LOADING:1,ERROR:2,LOADED:3},G=(r(8309),r(2526),r(1817),r(3948),{key:0,class:"product__page modal"}),V=(0,n.Wm)("svg",{width:"48",height:"48",viewBox:"-11 -1 44 13",fill:"none",class:"close-fullscreen_svg__close-button close-fullscreen_svg__fullscreen"},[(0,n.Wm)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.073 2.963l-9.36 9.245c-.394.39-1.03.39-1.426 0L.927 2.963a1.431 1.431 0 010-2.04 1.475 1.475 0 012.066 0L11 8.83 19.006.922a1.476 1.476 0 012.067 0 1.43 1.43 0 010 2.04z",fill:"#000"})],-1),J={class:"product__main__container"},X={class:"product__main__container__img"},tt={class:"product__main__container__second"},et={class:"hints__block"},rt={key:0,class:"sale__block__hint"},nt={class:"product__page__name"},at={key:0,class:"product_desc"},it={class:""},ct={class:"product_attributes_block"},ot={key:1,class:"product__main__container__second__priceblock"},st={class:"product__main__container__second__sale"},ut={class:"product__main__container__second__old"},_t={key:2,class:"product__main__container__second__price"},dt={key:3,class:"product__economy"},lt={class:"addcart_container"};function pt(t,e,r,a,i,c){var o=this,s=(0,n.up)("AttributeItem");return(0,n.wg)(),(0,n.j4)("div",null,[this.apiStateLoaded()?((0,n.wg)(),(0,n.j4)("div",G,[(0,n.Wm)("div",{class:"close_product_icon",onClick:e[1]||(e[1]=function(e){return t.$router.push("/")})},[V]),(0,n.Wm)("div",J,[(0,n.Wm)("div",X,[(0,n.Wm)("img",{src:this.$store.state.STATIC_URL+i.current_product.imgsrc,class:"product__mainimage__item"},null,8,["src"])]),(0,n.Wm)("div",tt,[(0,n.Wm)("div",null,[(0,n.Wm)("div",et,[i.current_product.sale_price>0?((0,n.wg)(),(0,n.j4)("div",rt,[(0,n.Wm)("span",null," - "+(0,n.zw)(c.getSalePercent(i.current_product))+" % ",1)])):(0,n.ry)("",!0)]),(0,n.Wm)("div",nt,[(0,n.Wm)("span",null,(0,n.zw)(i.current_product.name),1)]),"nan"!=i.current_product.description?((0,n.wg)(),(0,n.j4)("div",at,[(0,n.Wm)("div",it,(0,n.zw)(i.current_product.description),1)])):(0,n.ry)("",!0),(0,n.Wm)("div",ct,[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(Object.keys(this.current_attributes),(function(t){return(0,n.wg)(),(0,n.j4)("div",{class:"variants_block",key:t},[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(o.current_attributes[t].values,(function(e){return(0,n.wg)(),(0,n.j4)(s,{key:e,attr:t,attr_item:e},null,8,["attr","attr_item"])})),128))])})),128))]),i.current_product.sale_price>0?((0,n.wg)(),(0,n.j4)("div",ot,[(0,n.Wm)("span",st,(0,n.zw)(i.current_product.sale_price)+" ₽ ",1),(0,n.Wm)("span",ut,(0,n.zw)(i.current_product.price)+" ₽ ",1)])):((0,n.wg)(),(0,n.j4)("span",_t,(0,n.zw)(i.current_product.price)+" ₽ ",1)),i.current_product.sale_price>0?((0,n.wg)(),(0,n.j4)("div",dt,[(0,n.Wm)("span",null," Экономия "+(0,n.zw)(i.current_product.price-i.current_product.sale_price)+" ₽ ",1)])):(0,n.ry)("",!0)]),(0,n.Wm)("div",lt,[(0,n.Wm)("span",{class:"addcart_button pointer noselect",id:"product__addcart__button",onClick:e[2]||(e[2]=function(t){return o.addToCartClicked(i.current_product.id)})}," Добавить в корзину ")])])])])):(0,n.ry)("",!0),(0,n.Wm)("div",{class:"product_page_back",onClick:e[3]||(e[3]=function(e){return t.$router.push("/")})})])}var mt=r(7308);r(8559),r(7327),r(9720);function vt(t,e,r,a,i,c){var o=this;return(0,n.wg)(),(0,n.j4)("span",{class:["variant_item noselect pointer",[this.$parent.current_product.attributes[r.attr].value==r.attr_item?"active":"",this.deactive?"deactive":""]],onClick:e[1]||(e[1]=function(t){return o.setProductAttribute(r.attr,r.attr_item)})},(0,n.zw)(r.attr_item),3)}var ht={props:{attr:{},attr_item:{}},data:function(){return{deactive:!1}},updated:function(){this.deactive=this.$parent.calcDeactive(this.attr,this.attr_item),console.log("deactive is",this.deactive)},methods:{setProductAttribute:function(t,e){if(this.deactive)return console.log("cant make this field, no product with this variant");console.clear(),console.log("this is",this),console.log("this class is",this.class),1==this.$parent.current_attributes[t].lvl&&this.$store.commit("stashProductAttributes");var r={attribute:t,value:e,lvl:this.$parent.current_attributes[t].lvl};this.$store.commit("setProductAttribute",r),this.$parent.SetProductVariant()}}};ht.render=vt;var ft=ht,gt={name:"ProductPageModal",props:["product_id"],components:{AttributeItem:ft},data:function(){return{current_product:{},current_attributes:{}}},beforeMount:function(){this.$store.commit("setApiState",K.LOADING)},mounted:function(){var t=this;return(0,c.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("start mouting"),e.next=3,t.getProductByIdAPI(t.product_id);case 3:0==t.product.variations.length?t.current_product=t.product:t.current_product=t.product.variations[0],t.current_attributes=t.collectAttributes(),t.$store.commit("setApiState",K.LOADED);case 6:case"end":return e.stop()}}),e)})))()},computed:{product:function(){return this.$store.state.product},apiState:function(){return this.$store.state.apiState},product_attr:function(){return this.$store.state.product_attributes}},methods:{getProductByIdAPI:O,addToCart:Z,getCartAmount:M,calcDeactive:function(t,e){var r=this,n=Object.fromEntries(Object.entries(this.product_attr).filter((function(t){var e=(0,mt.Z)(t,1),n=e[0];return 1==r.product_attr[n].lvl})));if(0==!Object.keys(n).length){if(!(this.current_attributes[t].lvl>1))return!1;var a=Object.keys(n)[0],i=n[a],c=this.product.variations.filter((function(r){return r["attributes"][a].value==i.value&&r["attributes"][t].value==e}));if(0==c.length)return!0}return!1},collectAttributes:function(){for(var t={},e=this.product.variations,r=0;r<e.length;r++){var n=e[r].attributes,a=Object.keys(n);for(var i in a)t[a[i]]||(t[a[i]]={values:[],lvl:n[a[i]].lvl}),t[a[i]].values.includes(n[a[i]].value)||t[a[i]].values.push(n[a[i]].value)}return t},SetProductVariant:function(){var t=this,e=Object.keys(this.product_attr);this.current_product=this.product.variations.filter((function(r){for(var n in e){var a=e[n];if(r.attributes[a].value!=t.product_attr[a].value)return!1}return!0}))[0]},addToCartClicked:function(t){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("start adding to cart"),r.next=3,e.addToCart(t);case 3:return r.next=5,e.getCartAmount();case 5:e.$router.push("/"),e.$store.commit("showPopupMessage","Добавлено: \n"+e.current_product.name);case 7:case"end":return r.stop()}}),r)})))()},getSalePercent:function(t){return parseInt(100*t.sale_price/t.price)},isInCart:function(t){console.log("check if in cart",t);var e=this.$store.state.products_in_cart,r=Object.keys(e),n=r.includes(t.toString());return n},apiStateLoaded:function(){return this.apiState===K.LOADED},apiStateLoading:function(){return this.apiState===K.LOADING||this.apiState===K.INIT}}};gt.render=pt;var wt=gt;function yt(t,e,r,a,i,c){var o=(0,n.up)("MainSlider"),s=(0,n.up)("Products"),u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)("div",null,[(0,n.Wm)(o),(0,n.Wm)(s),(0,n.Wm)(u)])}var kt={class:"products_block"},bt={class:"category_name"},Wt={class:"products__list__wrapper"};function Pt(t,e,r,a,i,c){var o=this,s=(0,n.up)("ProductCard");return(0,n.wg)(),(0,n.j4)("div",kt,[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(this.categories,(function(t){return(0,n.wg)(),(0,n.j4)("div",{class:"category_containerm mgt10",key:t.id},[(0,n.Wm)("div",bt,(0,n.zw)(t.name),1),(0,n.Wm)("div",Wt,[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(o.getProductsByCategory(t),(function(t){return(0,n.wg)(),(0,n.j4)(s,{key:t.id,product:t},null,8,["product"])})),128)),(0,n.Uk)(" "+(0,n.zw)(c.count),1)])])})),128))])}var Ct={class:"product__item"},jt={class:"product__item__mainpart"},xt={class:"product__item__image"},$t={alt:""},St={class:"product__item__info"},At={class:"product__item__name"},Rt={key:0,class:"product__item__description"},It={class:"product__item__bottom"},Ot={class:"product__item__price"},Tt={class:"product__item__addcart",value:"{{ product.id }}"},zt={key:1},Mt=(0,n.Uk)(" Выбрать "),Zt={class:"product__item__mobile"},Lt={class:"product__item__mobile__img"},Qt={alt:""},Ut={class:"product__item__mobile__info"},Et={key:0,class:"product__item__mobile__info__desc"},Dt={class:"product__item__mobile__info__addcart"},Ft={key:0},Ht={key:1},qt={class:"product__item__mobile__info__addcart__button"};function Bt(t,e,r,a,i,c){var o=this,s=(0,n.up)("router-link"),u=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.j4)("div",null,[(0,n.Wm)("div",Ct,[(0,n.Wm)("div",jt,[(0,n.Wm)("div",xt,[(0,n.Wm)(s,{to:"/product/"+r.product.id},{default:(0,n.w5)((function(){return[(0,n.wy)((0,n.Wm)("img",$t,null,512),[[u,o.$store.state.STATIC_URL+r.product.imgsrc]])]})),_:1},8,["to"])]),(0,n.Wm)("div",St,[(0,n.Wm)("div",At,[(0,n.Wm)(s,{to:"/product/"+r.product.id,class:"nolink"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,n.zw)(r.product.name),1)]})),_:1},8,["to"])]),"nan"!=r.product.description?((0,n.wg)(),(0,n.j4)("div",Rt,(0,n.zw)(r.product.description),1)):(0,n.ry)("",!0)])]),(0,n.Wm)("div",It,[(0,n.Wm)("span",Ot,(0,n.zw)(this.checkProductPrice())+" ₽ ",1),(0,n.Wm)("span",Tt,[this.isInCart(r.product.id)?((0,n.wg)(),(0,n.j4)("span",{key:0,class:"in__cart__buttonstyle noselect",onClick:e[1]||(e[1]=function(t){return o.deleteFromCartClicked(r.product.id)})}," Удалить с корзины ")):((0,n.wg)(),(0,n.j4)("span",zt,["single"==r.product.product_type?((0,n.wg)(),(0,n.j4)("span",{key:0,class:"not__incart__buttonstyle noselect",onClick:e[2]||(e[2]=function(t){return o.addToCartClicked(r.product.id)})}," В корзину ")):((0,n.wg)(),(0,n.j4)(s,{key:1,to:"/product/"+r.product.id,class:"not__incart__buttonstyle noselect nolink white"},{default:(0,n.w5)((function(){return[Mt]})),_:1},8,["to"]))]))])])]),(0,n.Wm)("div",Zt,[(0,n.Wm)("div",Lt,[(0,n.wy)((0,n.Wm)("img",Qt,null,512),[[u,this.$store.state.STATIC_URL+r.product.imgsrc]])]),(0,n.Wm)("div",Ut,[(0,n.Wm)(s,{to:"/product/"+r.product.id,class:"product__item__mobile__info__name nolink"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,n.zw)(r.product.name),1)]})),_:1},8,["to"]),"nan"!=r.product.description?((0,n.wg)(),(0,n.j4)("div",Et,(0,n.zw)(r.product.description),1)):(0,n.ry)("",!0),(0,n.Wm)("div",Dt,[this.isInCart(r.product.id)?((0,n.wg)(),(0,n.j4)("span",{key:1,class:"not_in_cart noselect\n            product__item__mobile__info__addcart__button",onClick:e[4]||(e[4]=function(t){return c.deleteFromCartClicked(r.product.id)})}," Удалить с корзины ")):((0,n.wg)(),(0,n.j4)("div",Ft,["single"==r.product.product_type?((0,n.wg)(),(0,n.j4)("span",{key:0,class:"product__item__mobile__info__addcart__button noselect",onClick:e[3]||(e[3]=function(t){return o.addToCartClicked(r.product.id)})},(0,n.zw)(r.product.price)+" ₽ ",1)):((0,n.wg)(),(0,n.j4)("span",Ht,[(0,n.Wm)(s,{class:"nolink noselect white",to:"/product/"+r.product.id},{default:(0,n.w5)((function(){return[(0,n.Wm)("span",qt,(0,n.zw)(o.checkProductPrice())+" ₽ ",1)]})),_:1},8,["to"])]))]))])])])])}var Nt={name:"Products",props:{product:{}},components:{},computed:{},methods:{addToCart:Z,deleteFromCart:F,getCartAmount:M,getProductPrice:function(t){return t.sale_price>0?t.sale_price:t.price},checkProductPrice:function(){return"single"==this.product.product_type?this.getProductPrice(this.product):"variative"==this.product.product_type?this.product.variations?"от "+this.getProductPrice(this.product.variations[0]):this.getProductPrice(this.product):void 0},addToCartClicked:function(t){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("start adding to cart"),r.next=3,e.addToCart(t);case 3:return r.next=5,e.getCartAmount();case 5:e.$store.commit("showPopupMessage","Добавлено: \n"+e.product.name);case 6:case"end":return r.stop()}}),r)})))()},deleteFromCartClicked:function(t){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.deleteFromCart(t);case 2:return r.next=4,e.getCartAmount();case 4:case"end":return r.stop()}}),r)})))()},isInCart:function(t){var e=this.$store.state.products_in_cart,r=Object.keys(e),n=r.includes(t.toString());return n},getSalePercent:function(t){return parseInt(100*t.sale_price/t.price)}}};Nt.render=Bt;var Yt=Nt,Kt={name:"Products",components:{ProductCard:Yt},mounted:function(){console.log("mount products page")},computed:{categories:function(){return this.$store.state.categories},products:function(){return this.$store.state.products.filter((function(t){return null==t.parent}))},products_in_cart:function(){return this.$store.state.products_in_cart},count:function(){return this.$store.state.count}},methods:{getProductsByCategory:function(t){return this.products.filter((function(e){return e.category==t.id}))}}};Kt.render=Pt;var Gt=Kt,Vt={class:"main_slider"},Jt={class:"swiper-wrapper"},Xt={class:"swiper-slide\n            main_slider_item pointer noselect"},te={alt:""},ee={class:"swiper-slide\n            main_slider_item pointer noselect"},re={alt:""},ne={class:"swiper-slide\n            main_slider_item pointer noselect"},ae={alt:""};function ie(t,e,r,a,i,c){var o=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.j4)("div",null,[(0,n.Wm)("div",Vt,[(0,n.Wm)("div",Jt,[(0,n.Wm)("div",Xt,[(0,n.wy)((0,n.Wm)("img",te,null,512),[[o,c.api_url+"static/images/slider_image.jpeg"]])]),(0,n.Wm)("div",ee,[(0,n.wy)((0,n.Wm)("img",re,null,512),[[o,c.api_url+"static/images/slider_image.jpeg"]])]),(0,n.Wm)("div",ne,[(0,n.wy)((0,n.Wm)("img",ae,null,512),[[o,c.api_url+"static/images/slider_image.jpeg"]])])])])])}var ce=r(1329),oe=(r(7192),{name:"MainSlider",computed:{api_url:function(){return this.$store.state.STATIC_URL}},mounted:function(){this.initSwiper()},methods:{initSwiper:function(){var t=new ce.Z(".main_slider",{direction:"horizontal",autoHeight:!0,slidesPerView:1});t.init()}},components:{}});oe.render=ie;var se=oe,ue={name:"MainPage",components:{Products:Gt,MainSlider:se},computed:{products_in_cart:function(){return this.$store.state.products_in_cart}},methods:{}};ue.render=yt;var _e=ue,de=(0,n.Uk)(" cart products are: "),le={key:0},pe=(0,n.Wm)("div",{class:"cart__main__title"},[(0,n.Wm)("div",{class:"nice__title2__left"}," Корзина ")],-1),me={class:"cart__main"},ve={class:"cart__container"},he={class:"cart__container__products"},fe={class:"cart__container__checkout"},ge={class:"cart__container__checkout__content"},we=(0,n.uE)('<a class="cart__checkout__button" href="#"><span> Перейти к оформлению </span></a><span id="checkout_sub_text"> Доступные способы доставки и методы оплаты можно выбрать при оформлении заказа </span> promo block will be here <div class="your__cart__block"><span class="your__cart__block__title"> Ваша Корзина </span><span class="your__cart__block__value"> Общее кол-во: 0 </span></div><div class="your__cart__block"><span class="your__cart__block__title2"> Товары (2) </span><span class="your__cart__block__value2"> 0 ₽ </span></div><div class="your__cart__block"><span class="your__cart__block__title2"> Скидка </span><span class="your__cart__block__value3"><span id="total_discount_block"> 0 </span> ₽ </span></div>',6),ye={class:"your__cart__block"},ke=(0,n.Wm)("span",{class:"your__cart__block__title3"}," Общая стоимость ",-1),be={class:"your__cart__block__value4"},We={key:1},Pe=(0,n.Wm)("div",{class:"cart__main__title"},[(0,n.Wm)("div",{class:"nice__title2__left"}," Корзина ")],-1),Ce=(0,n.Wm)("div",null," Корзина пуста? ",-1);function je(t,e,r,a,i,c){var o=(0,n.up)("CheckOutItem");return(0,n.wg)(),(0,n.j4)(n.HY,null,[(0,n.Wm)("div",null,[de,(0,n.Wm)("div",null,(0,n.zw)(this.products_in_cart),1),(0,n.Wm)("div",null,(0,n.zw)(this.cart_products),1)]),this.cart_quantity?((0,n.wg)(),(0,n.j4)("div",le,[pe,(0,n.Wm)("div",me,[(0,n.Wm)("div",ve,[(0,n.Wm)("div",he,[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(c.cart_products,(function(t){return(0,n.wg)(),(0,n.j4)(o,{key:t.id,current_item:t},null,8,["current_item"])})),128))]),(0,n.Wm)("div",fe,[(0,n.Wm)("div",ge,[we,(0,n.Wm)("div",ye,[ke,(0,n.Wm)("span",be,(0,n.zw)(c.cart_amount)+" ₽ ",1)])])])])])])):((0,n.wg)(),(0,n.j4)("div",We,[Pe,Ce]))],64)}var xe={class:"cart__container__products__item"},$e={class:"cart__container__products__item__info__container"},Se={class:"cart__container__products__item__info"},Ae={class:"cart__container__products__item__info__name"},Re={href:""},Ie=(0,n.Wm)("div",{class:"cart__container__products__item__info__btns"},[(0,n.Wm)("div",{class:"cart__container__products__item__btn",id:"divide__delete",style:{color:"#808d9a"}}," | "),(0,n.Wm)("div",{class:"cart__container__products__item__btn\n                item__btn__cart item_btn_deletefromcart"},[(0,n.Wm)("span",null," Удалить ")])],-1),Oe={class:"cart__container__products__item__second__container"},Te={class:"cart__container__products__item__price"},ze={key:0},Me={class:"cart__container__products__item__price__sale"},Ze={class:"cart__container__products__item__price__regular"},Le={class:"cart__price__reg1",id:"reg1price{{item.id}}"},Qe=(0,n.Wm)("div",{class:"cart__container__products__item__price__regular__disc"},[(0,n.Uk)(" Скидка "),(0,n.Wm)("span",{class:"discount__valueset"}," 0 "),(0,n.Uk)(" ₽ ")],-1),Ue={key:1,class:"cart__container__products__item__price__sale"},Ee={class:"cart__container__products__item__count"},De={class:"cart__container__products__item__count__main"},Fe=(0,n.Wm)("i",{class:"gg-remove-r\n                cart__removequ"},null,-1),He={class:"cart__container__products__item__count__main__value"},qe=(0,n.Wm)("i",{class:"gg-add-r item__addqu"},null,-1);function Be(t,e,r,a,i,c){var o=this;return(0,n.wg)(),(0,n.j4)("div",null,[(0,n.Wm)("div",xe,[(0,n.Wm)("div",$e,[(0,n.Wm)("img",{class:"cart__container__products__item__img",src:this.$store.state.STATIC_URL+r.current_item.imgsrc},null,8,["src"]),(0,n.Wm)("div",Se,[(0,n.Wm)("div",Ae,[(0,n.Wm)("a",Re,(0,n.zw)(r.current_item.name),1)]),Ie])]),(0,n.Wm)("div",Oe,[(0,n.Wm)("div",Te,[r.current_item.sale_price>0?((0,n.wg)(),(0,n.j4)("div",ze,[(0,n.Wm)("div",Me,(0,n.zw)(r.current_item.sale_price)+" ₽ ",1),(0,n.Wm)("div",Ze,[(0,n.Wm)("span",Le,(0,n.zw)(r.current_item.price)+" ₽ ",1),Qe])])):((0,n.wg)(),(0,n.j4)("div",Ue,(0,n.zw)(r.current_item.price)+" ₽ ",1))]),(0,n.Wm)("div",Ee,[(0,n.Wm)("div",De,[(0,n.Wm)("div",{class:"cart__container__products__item__count__main__btn",onClick:e[1]||(e[1]=function(t){return o.$parent.deleteProductQuantityClicked(r.current_item.id)})},[Fe]),(0,n.Wm)("div",He,(0,n.zw)(this.cartItemQuantity(r.current_item)),1),(0,n.Wm)("div",{class:"cart__container__products__item__count__main__btn",onClick:e[2]||(e[2]=function(t){return o.$parent.addProductQuantityClicked(r.current_item.id)})},[qe])])])])])])}var Ne={name:"CheckOutItem",props:{current_item:{}},computed:{products_in_cart:function(){return this.$store.state.products_in_cart}},methods:{cartItemQuantity:function(t){var e=this.products_in_cart[t["id"]];return e}}};Ne.render=Be;var Ye=Ne,Ke={name:"CartPage",components:{CheckOutItem:Ye},mounted:function(){return(0,c.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("start mouting cart page");case 1:case"end":return t.stop()}}),t)})))()},computed:{cart_products:function(){return this.$store.getters.getCartProducts},products_in_cart:function(){return this.$store.state.products_in_cart},cart_quantity:function(){return Object.keys(this.$store.state.products_in_cart).length},cart_amount:function(){return this.$store.state.cart_amount}},methods:{addToCart:Z,addProductQuantity:Q,deleteFromCart:F,getCartAmount:M,deleteProductQuantity:E,addProductQuantityClicked:function(t){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.addProductQuantity(t);case 2:return r.next=4,e.getCartAmount();case 4:case"end":return r.stop()}}),r)})))()},deleteProductQuantityClicked:function(t){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.deleteProductQuantity(t);case 2:return r.next=4,e.getCartAmount();case 4:case"end":return r.stop()}}),r)})))()},getSalePercent:function(t){return parseInt(100*t.sale_price/t.price)},isInCart:function(t){console.log("product id is here",t);var e=this.$store.state.products_in_cart,r=Object.keys(e),n=r.includes(t.toString());return n}}};Ke.render=je;var Ge=Ke,Ve=[{path:"/",name:"MainPage",component:_e,children:[{path:"/product/:product_id",name:"ProductPageModal",component:wt,props:!0}]},{path:"/cart",name:"CartPage",component:Ge}],Je=(0,a.p7)({history:(0,a.PO)("/app"),routes:Ve}),Xe=(0,N.MT)({state:function(){return{STATIC_URL:"http://vuetest.fast-code.ru/",apiState:K.INIT,cart_amount:0,products:[],categories:[],products_in_cart:{},product:{},current_product:{},product_attributes:{},popup_message_title:"",popup_message_show:!1}},mutations:{setApiState:function(t,e){t.apiState=e},setProductAttribute:function(t,e){var r=e["attribute"],n=e["value"],a=e["lvl"];console.log("starting to set attrs",r,n,a),t.product_attributes[r]={value:n,lvl:a},console.log("from state: ",t.product_attributes)},stashProductAttributes:function(t){t.product_attributes={}},showPopupMessage:function(t,e){var r=this;t.popup_message_title=e,t.popup_message_show=!0,setTimeout((function(){r.state.popup_message_show=!1}),2e3)},change_count:function(t,e){t.count=e},setCategories:function(t,e){e.forEach((function(e){return t.categories.push(e)}))},setProducts:function(t,e){e.forEach((function(e){return t.products.push(e)}))},setProductsInCart:function(t,e){e.forEach((function(e){return t.products_in_cart[e["product_id"]]=e["quantity"]}))},addProductToCart:function(t,e){t.products_in_cart[e.toString()]=1},addProductQuantity:function(t,e){t.products_in_cart[e.toString()]+=1},deleteProductFromCart:function(t,e){delete t.products_in_cart[e.toString()]},deleteProductQuantity:function(t,e){t.products_in_cart[e.toString()]-=1},setCartAmount:function(t,e){t.cart_amount=e},setProduct:function(t,e){t.product=e},setCurrentProduct:function(t,e){console.log("call set current product",e),t.current_product=e}},getters:{getProductByid:function(t){return function(e){var r=t.products.find((function(t){return t["id"]==e}));return r}},getCartProducts:function(t){var e=Object.keys(t.products_in_cart),r=[];return t.products.forEach((function(t){var n=t.id.toString();e.includes(n)&&r.push(t)})),r}}}),tr=(0,n.ri)(B);tr.use(Xe),tr.use(Je),tr.use(Y.Z),tr.mount("#app")}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,n,a,i){if(!n){var c=1/0;for(u=0;u<t.length;u++){n=t[u][0],a=t[u][1],i=t[u][2];for(var o=!0,s=0;s<n.length;s++)(!1&i||c>=i)&&Object.keys(r.O).every((function(t){return r.O[t](n[s])}))?n.splice(s--,1):(o=!1,i<c&&(c=i));o&&(t.splice(u--,1),e=a())}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,a,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,i,c=n[0],o=n[1],s=n[2],u=0;for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(s)var _=s(r);for(e&&e(n);u<c.length;u++)i=c[u],r.o(t,i)&&t[i]&&t[i][0](),t[c[u]]=0;return r.O(_)},n=self["webpackChunkvueapp"]=self["webpackChunkvueapp"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(3133)}));n=r.O(n)})();
//# sourceMappingURL=app-legacy.js.map